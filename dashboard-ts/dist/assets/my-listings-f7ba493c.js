import{p as y,r as a,j as e,B as w,ak as T,T as m,S,W as I}from"./index-c1be743a.js";import{B as L,C as M,N,a as E,f as k}from"./NFTMarketplace-a3d69bb5.js";import{c as d,N as v}from"./no-nfts-31e9c2f5.js";import{M as F}from"./index-fbe56cf4.js";import{C as g}from"./Container-c4415724.js";import{G as h}from"./Grid-5556d8af.js";import{C as b}from"./Card-3aa4196d.js";import{C as R}from"./CardMedia-5fdf9f74.js";import{C as P}from"./CardContent-1f5ce5ed.js";import{C as U}from"./Chip-16ebfb26.js";const A=()=>{const x=y(),[n,p]=a.useState([]),[r,o]=a.useState("not-loaded");a.useEffect(()=>{f()},[]);async function f(){try{const i=await new L(window.ethereum).getSigner(),c=new M(F,N.abi,i),l=await c.fetchItemsListed();console.log("LSITED",l);const j=await Promise.all(l.map(async s=>{const u=await c.tokenURI(s.tokenId),C=await E.get(d(u.replace("/metadata.json",""))+"/metadata.json");return{price:k(s.price.toString(),"ether"),tokenId:s.tokenId,seller:s.seller,owner:s.owner,image:d(C.data.image,!0)}}));p(j),o("loaded")}catch(t){console.error("Error loading NFTs:",t),o("error")}}return r==="loaded"&&!n.length?e.jsx(v,{title:"My Listings",body:"No items in the List"}):r==="not-loaded"||r==="loading"?e.jsx(g,{children:e.jsx(w,{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh",children:e.jsx(T,{})})}):e.jsxs(g,{children:[e.jsx(m,{variant:"h4",mb:4,children:"My Listings"}),e.jsx(h,{container:!0,spacing:4,children:n.map((t,i)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(b,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(R,{image:t.image,title:"This is your NFT "+name,sx:{height:150,objectFit:"cover"}}),e.jsx(P,{children:e.jsxs(S,{direction:"row",alignItems:"center",spacing:1,sx:{justifyContent:"flex-end"},children:[e.jsx(m,{variant:"subtitle1",children:t.price}),e.jsx(U,{icon:e.jsx("img",{src:"/assets/ethereum.svg",alt:"ETH",width:18,height:18}),label:"ETH",size:"small",sx:{marginRight:1,backgroundColor:x.palette.grey[300],display:"flex",alignItems:"center",justifyContent:"center"}})]})})]})},i))})]})},B=A;function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsx("title",{children:" My Listings | Minimal UI "})}),e.jsx(B,{})]})}export{Q as default};
